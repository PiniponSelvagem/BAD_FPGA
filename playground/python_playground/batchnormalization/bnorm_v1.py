import numpy as np

def batch_normalization(input):
    epsilon = 0.001
    beta = -0.043935634195804596
    gamma = 0.9056835770606995
    moving_mean = 0.02926195226609707
    moving_variance = 3.146245944662951e-05
    
    mean = np.ones(len(input)) * moving_mean
    variance = np.ones(len(input)) * moving_variance
        
    # Normalize the input
    normalized = (input - mean) / np.sqrt(variance + epsilon)
    output = gamma * normalized + beta
    
    return output



input = [
            0.006878519430756569,
            0.04207489639520645,
            0.039868228137493134,
            0.0367857962846756,
            0.03973490744829178,
            0.037032026797533035,
            0.036674268543720245,
            0.03756413236260414,
            0.03610225021839142,
            0.03668391332030296,
            0.036276161670684814,
            0.03693279251456261,
            0.037340473383665085,
            0.03686321899294853,
            0.036102596670389175,
            0.036170296370983124,
            0.03703399747610092,
            0.0364765003323555,
            0.03597224876284599,
            0.036780908703804016,
            0.03623903542757034,
            0.03540913388133049,
            0.035040318965911865,
            0.035569556057453156,
            0.03457644581794739,
            0.035316623747348785,
            0.03499962389469147,
            0.035490915179252625,
            0.03655381128191948,
            0.036169588565826416,
            0.03461948037147522,
            0.03484361991286278,
            0.03435106948018074,
            0.03437378630042076,
            0.03397327661514282,
            0.03442251309752464,
            0.03433734178543091,
            0.034176964312791824,
            0.03416593000292778,
            0.02727334573864937
        ]

output_expected = [
                    -0.6751494407653809,
                    0.31738993525505066,
                    0.2551617920398712,
                    0.1682370901107788,
                    0.2514021694660187,
                    0.17518079280853271,
                    0.16509199142456055,
                    0.19018620252609253,
                    0.14896106719970703,
                    0.16536399722099304,
                    0.15386536717414856,
                    0.1723823845386505,
                    0.18387901782989502,
                    0.17042040824890137,
                    0.1489708423614502,
                    0.15087997913360596,
                    0.17523637413978577,
                    0.15951493382453918,
                    0.14529502391815186,
                    0.16809925436973572,
                    0.15281841158866882,
                    0.12941515445709229,
                    0.11901455372571945,
                    0.13393905758857727,
                    0.10593331605195999,
                    0.1268063485622406,
                    0.11786695569753647,
                    0.1317213773727417,
                    0.16169509291648865,
                    0.1508600115776062,
                    0.10714688152074814,
                    0.11346762627363205,
                    0.09957768768072128,
                    0.10021830350160599,
                    0.08892390877008438,
                    0.10159239917993546,
                    0.09919057041406631,
                    0.09466791898012161,
                    0.09435675293207169,
                    -0.10001441836357117
                ]


output = batch_normalization(input)

print(output)
print(output_expected)